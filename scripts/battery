#!/bin/bash

# Hide cursor for cleaner output
tput civis

# Trap Ctrl+C to restore cursor
trap "tput cnorm; exit" INT

while true; do
    # Move cursor to top-left instead of full clear
    tput cup 0 0

    # Get terminal width
    cols=$(tput cols)

    # Get battery info
    battery_percent=$(acpi -b | grep -oP '\d+%')
    current_time=$(date '+%I:%M:%S %p')
    current_date=$(date '+%A, %d %B %Y')

    # Build figlet banner
    figlet_text=$(figlet "Battery: $battery_percent")

    # Print figlet text centered in bold blue
    echo "$figlet_text" | while IFS= read -r line; do
        padding=$(( (cols - ${#line}) / 2 ))
        printf "\033[1;34m%*s%s\033[0m\n" "$padding" "" "$line"
    done

    # Print time and date centered in cyan
    time_line="Time: $current_time"
    date_line="Date: $current_date"
    printf "\n\033[1;36m%*s%s\033[0m\n" $(( (cols - ${#time_line}) / 2 )) "" "$time_line"
    printf "\033[1;36m%*s%s\033[0m\n" $(( (cols - ${#date_line}) / 2 )) "" "$date_line"

    # Small sleep for smooth refresh
    sleep 1
done
